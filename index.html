<!DOCTYPE html>
<html>
<head>
  <title>One Bite Chandannagar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>

  <style>
    body{
      margin:0;
      font-family: Arial;
      background:#111;
      color:white;
    }

    header{
      background:black;
      padding:20px;
      text-align:center;
      border-bottom:2px solid gold;
    }

    header img{
      width:120px;
    }

    h1{
      color:gold;
      margin:10px 0 0 0;
    }

    .menu{
      padding:15px;
      margin-bottom:120px;
    }

    .item{
      background:#1e1e1e;
      padding:15px;
      margin:10px 0;
      border-radius:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    button{
      background:gold;
      border:none;
      padding:6px 10px;
      font-weight:bold;
      border-radius:5px;
    }

    .cart-box{
      position:fixed;
      bottom:0;
      width:100%;
      background:black;
      padding:15px;
    }

    input, select{
      width:100%;
      padding:8px;
      margin:5px 0;
      border-radius:5px;
      border:none;
    }
  </style>
</head>

<body>

<header>
  <img src="icon.png">
  <h1>One Bite Chandannagar</h1>
  <p>Within 2KM Free | After 2KM ₹20</p>
</header>

<div class="menu">

  <div class="item">
    <span>Chicken Burger ₹79</span>
    <button onclick="addItem('Chicken Burger',79)">Add</button>
  </div>

  <div class="item">
    <span>Veg Burger ₹69</span>
    <button onclick="addItem('Veg Burger',69)">Add</button>
  </div>

  <div class="item">
    <span>Egg Fried Rice ₹109</span>
    <button onclick="addItem('Egg Fried Rice',109)">Add</button>
  </div>

  <div class="item">
    <span>Chicken Butter Masala ₹179</span>
    <button onclick="addItem('Chicken Butter Masala',179)">Add</button>
  </div>

</div>

<div class="cart-box">
  <div id="cartItems"></div>
  <b>Total: ₹<span id="total">0</span></b>

  <input type="text" id="name" placeholder="Your Name">
  <input type="text" id="mobile" placeholder="Mobile Number">
  <input type="text" id="address" placeholder="Full Address">

  <select id="distance">
    <option value="0">Within 2 KM (Free)</option>
    <option value="20">More than 2 KM (+₹20)</option>
  </select>

  <button onclick="placeOrder()">Place Order (COD)</button>
</div>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyDPPGKtaoAS0t46f8KVAa5D_KKYB2_uLeY",
  authDomain: "cloud-kitchen-app-dc9d1.firebaseapp.com",
  projectId: "cloud-kitchen-app-dc9d1",
  storageBucket: "cloud-kitchen-app-dc9d1.firebasestorage.app",
  messagingSenderId: "685310204155",
  appId: "1:685310204155:web:73bbd90da03813da02f85e"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let cart = [];
let total = 0;

function addItem(name,price){
  cart.push(name + " ₹" + price);
  total += price;
  document.getElementById("cartItems").innerHTML = cart.join("<br>");
  document.getElementById("total").innerText = total;
}

function placeOrder(){

  if(cart.length === 0){
    alert("Cart is empty!");
    return;
  }

  let name = document.getElementById("name").value;
  let mobile = document.getElementById("mobile").value;
  let address = document.getElementById("address").value;
  let deliveryCharge = parseInt(document.getElementById("distance").value);

  let finalTotal = total + deliveryCharge;

  db.collection("orders").add({
    name: name,
    mobile: mobile,
    address: address,
    items: cart,
    total: finalTotal,
    deliveryCharge: deliveryCharge,
    status: "Pending",
    createdAt: new Date()
  });

  let message = "New Order%0A";
  message += "Name: "+name+"%0A";
  message += "Mobile: "+mobile+"%0A";
  message += "Address: "+address+"%0A";
  message += "Items:%0A"+cart.join("%0A")+"%0A";
  message += "Delivery Charge: ₹"+deliveryCharge+"%0A";
  message += "Total: ₹"+finalTotal;

  window.location.href="https://wa.me/917003355253?text="+message;
}

</script>

</body>
</html>
